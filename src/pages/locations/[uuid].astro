---
import Layout from "../../layouts/Layout.astro";

const { uuid } = Astro.params;

// iz baze povuci detalje o specifičnom kafiću na temelju UUID iz linka
const location = {
    uuid: "u3z",
    neighborhood: "Kozari bok",
    street_address: "Unska 3",
    city: "Zagreb",
};

const tables = [
    { id: 1, available_seats: 2, coordinates: { row: 1, col: 0 } },
    { id: 2, available_seats: 2, coordinates: { row: 0, col: 1 } },
    { id: 3, available_seats: 5, coordinates: { row: 4, col: 1 } },
    { id: 4, available_seats: 5, coordinates: { row: 3, col: 5 } },
];
---

<Layout title="CoffeePlace">
    <div><span>UUID: {uuid}</span></div>
    <div class="seating-chart medium-width center-align center">
        {
            tables.map((table) => (
                <button
                    class="table"
                    data-ui="#dialog"
                    data-id={table.id}
                    style={`grid-column: ${table.coordinates.col + 1}; grid-row: ${table.coordinates.row + 1};`}
                >
                    {table.id}
                </button>
            ))
        }
    </div>

    <div class="overlay blur"></div>
    <dialog id="dialog">
        <h5>Custom overlay</h5>
        <div id="form-table-id">You pressed table with id:</div>
        <nav class="right-align no-space">
            <button class="transparent link" data-ui="#dialog">Confirm</button>
        </nav>
    </dialog>
</Layout>

<style>
    .seating-chart {
        display: grid;
        grid-template-columns: repeat(
            5,
            1fr
        ); /* Creates 5 columns of equal width */
        grid-template-rows: repeat(5, 1fr); /* Creates 5 rows of equal height */
        gap: 10px; /* Space between grid cells */
    }

    .table {
        width: 75px; /* Adjust size as needed */
        height: 75px;
        background-color: #ffd700; /* Example color */
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 20px; /* Adjust font size as needed */
    }
</style>

<script>
    let selected_table_id = null;

    let handleClick = (id) => {
        selected_table_id = id;
        console.log("Table clicked with ID:", id);
        document.getElementById("form-table-id").innerHTML =
            `You pressed table with id: ${selected_table_id}`;
    };

    const tableButtons = document.querySelectorAll(".table");
    tableButtons.forEach((button) =>
        button.addEventListener("click", () => handleClick(button.dataset.id)),
    );
</script>
